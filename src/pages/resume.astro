---
import { ExternalLink, FileDown } from "lucide-astro";
import { SITE_TITLE } from "@/shared/config/consts";
import { getUrl } from "@/shared/utils/url";
import Layout from "../layouts/Layout.astro";
---

<Layout
  title={`Resume - ${SITE_TITLE}`}
  description="김덕환의 이력서 - 아끼지 않는 문제해결사"
>
  <div class="resume-wrapper max-w-4xl mx-auto px-6 py-16 bg-background print:max-w-full print:p-0 print:m-0 print:bg-white">
    <!-- A4 Paper Simulation -->
    <div
      class="a4-page bg-white shadow-lg border border-gray-200 py-8 px-12
             min-h-[297mm] w-[210mm] mx-auto box-border
             max-md:w-full max-md:min-h-auto
             print:shadow-none print:border-0 print:min-h-auto print:w-full print:m-0
             print:pt-[15mm] print:pr-[15mm] print:pb-[12mm] print:pl-[15mm]"
    >
      <!-- Print Button (hidden on print) -->
      <div class="print:hidden mb-6 flex justify-between items-center">
        <a
          href={getUrl("/portfolio")}
          class="text-sm text-[#7c3aed] hover:text-[#8b5cf6] font-medium flex items-center gap-1"
        >
          <ExternalLink class="w-4 h-4" />
          상세 포트폴리오 보기
        </a>
        <button
          id="print-btn"
          class="flex items-center gap-2 px-4 py-2 bg-[#7c3aed] text-white text-sm font-semibold rounded-md hover:bg-[#8b5cf6] transition-colors"
        >
          <FileDown class="w-4 h-4" />
          PDF로 저장
        </button>
      </div>
      <!-- Header -->
      <div class="flex justify-between items-start mb-4 pb-4 border-b-2 border-[#8b5cf6] pl-4 border-l-4 border-l-[#7c3aed]">
        <div>
          <h1 class="text-3xl font-bold text-gray-900 mb-1">김덕환</h1>
          <p class="text-lg text-[#7c3aed] font-semibold">아끼지 않는 문제해결사</p>
        </div>
        <div class="text-right text-sm text-gray-700 space-y-0.5">
          <p>sachi009955@gmail.com</p>
          <p>github.com/IISweetHeartII</p>
          <p>log8.kr</p>
        </div>
      </div>

      <!-- Summary -->
      <section class="mb-4">
        <h2 class="text-lg font-bold text-[#7c3aed] mb-2 border-b border-[#e5e7eb] pb-1">Summary</h2>
        <ul class="text-sm text-gray-600 space-y-1 pl-4 list-disc">
          <li><strong class="font-semibold text-gray-800">아끼지 않는 문제해결사</strong> - 고객/비즈니스의 실제 문제를 정의하고 해결하는 데 집중합니다.</li>
          <li>사람 중심의 AI 제품을 설계하고 구현해, 제품 채택과 임팩트를 만드는 것을 지향합니다.</li>
          <li>신기술(AI 포함) 검증과 지식 공유에 시간과 비용을 아끼지 않습니다.</li>
        </ul>
      </section>

      <!-- Projects -->
      <section class="mb-4">
        <h2 class="text-lg font-bold text-[#7c3aed] mb-3 border-b border-[#e5e7eb] pb-1">Projects</h2>

        <!-- Project 1: Finders -->
        <div class="mb-5">
          <div class="mb-1.5">
            <h3 class="font-bold text-[#8b5cf6] text-base">
              <a href={getUrl("/portfolio#finders")} class="hover:text-[#7c3aed]">
                BE Lead로 GCP 인프라 구축 및 팀 코드 리뷰 문화 정착
              </a>
            </h3>
            <span class="text-sm text-gray-500">2025.12 - 현재 | Backend Lead (5명 BE팀)</span>
          </div>
          <div class="grid grid-cols-2 gap-x-6 text-sm">
            <div>
              <p class="font-semibold text-gray-700 mb-1">문제 해결</p>
              <ul class="text-gray-600 space-y-0.5 pl-4 list-disc">
                <li>GCP 인프라 구축으로 초기 비용 <strong class="font-semibold text-gray-800">$300 절감</strong></li>
                <li>코드 컨벤션 문서화 + <strong class="font-semibold text-gray-800">코드 리뷰 문화</strong> 정착</li>
                <li>GCS Presigned URL로 대량 이미지 업로드 최적화</li>
              </ul>
            </div>
            <div>
              <p class="font-semibold text-gray-700 mb-1">구현</p>
              <ul class="text-gray-600 space-y-0.5 pl-4 list-disc">
                <li><strong class="font-semibold text-gray-800">Java 21, Spring Boot 3.4</strong>, MySQL, QueryDSL</li>
                <li><strong class="font-semibold text-gray-800">CI/CD + VPC</strong>, dev/prod DB 분리 운영</li>
                <li>GCE 2개로 main/develop 브랜치 분리 배포</li>
              </ul>
            </div>
          </div>
        </div>

        <!-- Project 2: 덕친소 -->
        <div class="mb-5">
          <div class="mb-1.5">
            <h3 class="font-bold text-[#8b5cf6] text-base">
              <a href={getUrl("/portfolio#duckchinso")} class="hover:text-[#7c3aed]">
                AI 기반 소개팅 매칭 서비스 풀스택 개발
              </a>
            </h3>
            <span class="text-sm text-gray-500">2025.11 - 현재 | Full-Stack 1인 개발</span>
          </div>
          <div class="grid grid-cols-2 gap-x-6 text-sm">
            <div>
              <p class="font-semibold text-gray-700 mb-1">문제 해결</p>
              <ul class="text-gray-600 space-y-0.5 pl-4 list-disc">
                <li>수동 매칭 → <strong class="font-semibold text-gray-800">벡터 DB + AI 추천</strong>으로 자동화</li>
                <li>Mac Mini를 <strong class="font-semibold text-gray-800">Cloudflare Tunnel</strong>로 배포</li>
                <li><strong class="font-semibold text-gray-800">포트원 결제</strong> 연동으로 수익화 모델 구축</li>
              </ul>
            </div>
            <div>
              <p class="font-semibold text-gray-700 mb-1">구현</p>
              <ul class="text-gray-600 space-y-0.5 pl-4 list-disc">
                <li><strong class="font-semibold text-gray-800">Next.js, Spring Boot</strong>, PostgreSQL, Docker</li>
                <li><strong class="font-semibold text-gray-800">pgvector</strong> 활용 AI 벡터 유사도 매칭</li>
                <li>Solapi SMS 알림 시스템 구축</li>
              </ul>
            </div>
          </div>
        </div>

        <!-- Project 3: MathFigure -->
        <div class="mb-5">
          <div class="mb-1.5">
            <h3 class="font-bold text-[#8b5cf6] text-base">
              <a href={getUrl("/portfolio#mathfigure")} class="hover:text-[#7c3aed]">
                ICAN-LABs 최우수상 수상, 40명 고객 인터뷰 기반 MVP
              </a>
            </h3>
            <span class="text-sm text-gray-500">2025.09 - 현재 | 풀스택 1인 개발</span>
          </div>
          <div class="grid grid-cols-2 gap-x-6 text-sm">
            <div>
              <p class="font-semibold text-gray-700 mb-1">문제 해결</p>
              <ul class="text-gray-600 space-y-0.5 pl-4 list-disc">
                <li>고3 수능 콘텐츠 제작 시간 <strong class="font-semibold text-gray-800">1/10로 단축</strong></li>
                <li><strong class="font-semibold text-gray-800">40명</strong> 인터뷰로 "도구 복잡성" Pain Point 발견</li>
                <li>직관적 UX로 진입 장벽 해소</li>
              </ul>
            </div>
            <div>
              <p class="font-semibold text-gray-700 mb-1">구현</p>
              <ul class="text-gray-600 space-y-0.5 pl-4 list-disc">
                <li><strong class="font-semibold text-gray-800">Next.js, MathJson</strong>, Fabric.js, JSXGraph</li>
                <li>수학 수식 파싱 + 도형 시각화 엔진</li>
                <li>중앙대 창업 프로그램 <strong class="font-semibold text-gray-800">최우수상</strong> 수상</li>
              </ul>
            </div>
          </div>
        </div>

        <!-- Project 4: 오메추 -->
        <div class="mb-4">
          <div class="mb-1.5">
            <h3 class="font-bold text-[#8b5cf6] text-base">
              <span class="hover:text-[#7c3aed]">
                JWT 인증 단일화로 API 응답속도 50% 개선
              </span>
            </h3>
            <span class="text-sm text-gray-500">2025.06 - 2025.08 | Frontend (인증 파트)</span>
          </div>
          <div class="grid grid-cols-2 gap-x-6 text-sm">
            <div>
              <p class="font-semibold text-gray-700 mb-1">문제 해결</p>
              <ul class="text-gray-600 space-y-0.5 pl-4 list-disc">
                <li>쿠키 세션 + JWT 혼용으로 인증 복잡성 발생</li>
                <li>JWT 단일화로 API 응답 <strong class="font-semibold text-gray-800">420ms → 210ms (50%↑)</strong></li>
                <li><strong class="font-semibold text-gray-800">KPT 회고</strong> 도입으로 팀 협업 프로세스 표준화</li>
              </ul>
            </div>
            <div>
              <p class="font-semibold text-gray-700 mb-1">구현</p>
              <ul class="text-gray-600 space-y-0.5 pl-4 list-disc">
                <li><strong class="font-semibold text-gray-800">Next.js, TypeScript</strong> 기반 인증 파트 개발</li>
                <li><strong class="font-semibold text-gray-800">Zustand + TanStack Query</strong> 활용 상태 관리</li>
                <li>UMC 8기 데모데이 <strong class="font-semibold text-gray-800">장려상, 현장 투표 1위</strong></li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <!-- Page Break for Print -->
      <div class="hidden print:block print:break-before-page"></div>

      <!-- Tech Stack -->
      <section class="mb-4 print:pt-[15mm]">
        <h2 class="text-lg font-bold text-[#7c3aed] mb-2 border-b border-[#e5e7eb] pb-1">Tech Stack</h2>
        <div class="grid grid-cols-2 gap-x-4 gap-y-1 text-sm">
          <div class="flex">
            <span class="font-semibold text-gray-800 w-20">Languages</span>
            <span class="text-gray-600">TypeScript, Java, Python, C++</span>
          </div>
          <div class="flex">
            <span class="font-semibold text-gray-800 w-20">Frontend</span>
            <span class="text-gray-600">Next.js, Astro, React, TailwindCSS</span>
          </div>
          <div class="flex">
            <span class="font-semibold text-gray-800 w-20">Backend</span>
            <span class="text-gray-600">Spring Boot, NestJS, Supabase</span>
          </div>
          <div class="flex">
            <span class="font-semibold text-gray-800 w-20">Database</span>
            <span class="text-gray-600">PostgreSQL, MySQL, pgvector</span>
          </div>
          <div class="flex">
            <span class="font-semibold text-gray-800 w-20">DevOps</span>
            <span class="text-gray-600">GCP (GCS, Cloud SQL), Docker, GitHub Actions, Sentry</span>
          </div>
          <div class="flex">
            <span class="font-semibold text-gray-800 w-20">AI Tools</span>
            <span class="text-gray-600">Claude Code, OpenCode, Antigravity</span>
          </div>
        </div>
      </section>

      <!-- Experience -->
      <section class="mb-4">
        <h2 class="text-lg font-bold text-[#7c3aed] mb-2 border-b border-[#e5e7eb] pb-1">Experience</h2>
        <div class="space-y-1.5 text-sm">
          <div class="flex justify-between">
            <div>
              <span class="font-semibold text-gray-800">UMC 9기</span>
              <span class="text-gray-600"> - <strong class="font-semibold text-gray-800">Web 파트장</strong> (강의 및 멘토링), Spring Boot 챌린저</span>
            </div>
            <span class="text-gray-500">2025.09 - 현재</span>
          </div>
          <div class="flex justify-between">
            <div>
              <span class="font-semibold text-gray-800">UMC 8기</span>
              <span class="text-gray-600"> - Web 챌린저 (React, Next.js 학습)</span>
            </div>
            <span class="text-gray-500">2025.03 - 2025.08</span>
          </div>
          <div class="flex justify-between">
            <div>
              <span class="font-semibold text-gray-800">AI 활용 강연</span>
              <span class="text-gray-600"> - 시니어 소상공인 대상 (ChatGPT, Gemini Gems, NotebookLM)</span>
            </div>
            <span class="text-gray-500">2025.05, 07</span>
          </div>
          <div class="flex justify-between">
            <div>
              <span class="font-semibold text-gray-800">AI 활용 강연</span>
              <span class="text-gray-600"> - 리피움 창업가모임 (<strong class="font-semibold text-gray-800">MCP, Agent AI</strong>)</span>
            </div>
            <span class="text-gray-500">2025.09</span>
          </div>
        </div>
      </section>

      <!-- Awards & Certifications -->
      <section class="mb-4">
        <h2 class="text-lg font-bold text-[#7c3aed] mb-2 border-b border-[#e5e7eb] pb-1">Awards & Certifications</h2>
        <div class="grid grid-cols-2 gap-x-4 text-sm">
          <div>
            <p class="font-semibold text-gray-700 mb-1">Awards</p>
            <ul class="text-gray-600 space-y-0.5 pl-4 list-disc">
              <li>UMC 9기 해커톤 대상 (2026.01)</li>
              <li>ICAN-LABs 창업 탐색 프로그램 최우수상 (2025.11)</li>
              <li>UMC 8기 데모데이 장려상 (2025.08)</li>
              <li>기업가정신 해외교육 프로그램 최우수상 (2025.02)</li>
            </ul>
          </div>
          <div>
            <p class="font-semibold text-gray-700 mb-1">Certifications</p>
            <ul class="text-gray-600 space-y-0.5 pl-4 list-disc">
              <li>정보처리기사 (2025.09)</li>
              <li>SQLD (2025.09)</li>
              <li>OPIc IH (2024.12)</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- Education -->
      <section>
        <h2 class="text-lg font-bold text-[#7c3aed] mb-2 border-b border-[#e5e7eb] pb-1">Education</h2>
        <div class="text-sm">
          <div class="flex justify-between mb-1">
            <span class="font-semibold text-gray-800">중앙대학교</span>
            <span class="text-gray-500">2020.03 - 2026.02 (졸업예정)</span>
          </div>
          <ul class="text-gray-600 space-y-0.5 pl-4 list-disc">
            <li>수학과 (주전공) / 소프트웨어인문 융합전공 (복수전공)</li>
            <li>교직이수 완료 (중등학교 정교사 2급 자격증 취득 예정)</li>
            <li>총 162학점 이수, 평균 학점 3.86/4.5</li>
          </ul>
        </div>
      </section>
    </div>

    <!-- Page 2 hint (optional, for longer content) -->
    <div class="print:hidden mt-4 text-center text-sm text-gray-500">
      A4 1페이지 미리보기 | 인쇄 시 자동 최적화
    </div>
  </div>
</Layout>

<style>
  /* 인쇄 전용 스타일 - TailwindCSS로 대체 불가능한 부분만 유지 */
  @media print {
    /* 전역 요소 숨김 - :global() 필수 */
    :global(header),
    :global(footer),
    :global(nav),
    :global([class*="ProgressIndicator"]),
    :global([class*="progress"]) {
      display: none !important;
    }

    /* 전체 body/html 초기화 - :global() 필수 */
    :global(html),
    :global(body) {
      margin: 0 !important;
      padding: 0 !important;
      background: white !important;
    }

    :global(body > main),
    :global(main.grow) {
      padding: 0 !important;
      margin: 0 !important;
    }

    /* A4 페이지 설정 - @page at-rule은 TailwindCSS 불가 */
    @page {
      size: A4;
      margin: 0;
    }

    /* 인쇄 시 색상 보존 - 브라우저 전용 속성 */
    html {
      -webkit-print-color-adjust: exact !important;
      print-color-adjust: exact !important;
    }
  }
</style>

<script>
  document.getElementById("print-btn")?.addEventListener("click", () => {
    window.print();
  });
</script>
